/*
	Global theme primitives.

	Theme selection is controlled via:
		document.documentElement.dataset.theme = 'dark' | 'light'

	We keep this file as plain CSS (no @apply) to avoid editor warnings.
	The actual Tailwind utility classes for each theme are applied in JS
	during app startup (see src/shared/lib/theme.js).
*/

:root {
  color-scheme: dark;
}

:root[data-theme="dark"] {
  color-scheme: dark;
}

:root[data-theme="light"] {
  color-scheme: light;

  /* Theme palette (light) */
  --dp-bg: rgb(255 255 255);
  --dp-fg: rgb(15 23 42); /* slate-900 */
  --dp-fg-soft: rgb(30 41 59); /* slate-800 */
  --dp-muted: rgb(71 85 105); /* slate-600 */
  --dp-subtle: rgb(100 116 139); /* slate-500 */
  --dp-border: rgb(226 232 240); /* slate-200 */
  --dp-surface: rgb(255 255 255);
  --dp-surface-muted: rgb(248 250 252); /* slate-50 */
  --dp-nav-scrolled-bg: rgb(255 255 255 / 0.7);
  --dp-nav-panel-bg: rgb(255 255 255 / 0.9);
  --dp-glow-opacity: 0.35;
  --dp-placeholder: rgb(148 163 184); /* slate-400 */

  /* Semantic CTAs in light mode */
  --dp-btn-primary-bg: rgb(15 23 42);
  --dp-btn-primary-fg: rgb(255 255 255);
  --dp-btn-primary-bg-hover: rgb(30 41 59);

  /* Hero/topbar CTA */
  --dp-btn-hero-bg: rgb(15 23 42);
  --dp-btn-hero-fg: rgb(255 255 255);
  --dp-btn-hero-bg-hover: rgb(30 41 59);
  --dp-btn-hero-fg-hover: rgb(255 255 255);

  /* Sidebar primitives */
  --dp-sidebar-bg: rgb(255 255 255 / 0.96);
  --dp-hover-bg: rgb(15 23 42 / 0.06);
  --dp-overlay-bg: rgb(15 23 42 / 0.5);

  /* Status & danger */
  --dp-status-online: rgb(34 197 94); /* green-500 */
  --dp-toast-success: rgb(34 197 94); /* green-500 */
  --dp-toast-error: rgb(239 68 68); /* red-500 */
  --dp-toast-warning: rgb(245 158 11); /* amber-500 */
  --dp-toast-info: rgb(59 130 246); /* blue-500 */
  --dp-danger-bg: rgb(239 68 68 / 0.1);
  --dp-danger-bg-hover: rgb(239 68 68 / 0.15);
  --dp-danger-border: rgb(239 68 68 / 0.2);
  --dp-danger-fg: rgb(127 29 29); /* red-900-ish */

  --dp-resize-handle-bg: rgb(255 255 255 / 0.6);

  /* Chat UI */
  --dp-chat-fade-bg: color-mix(in srgb, var(--dp-surface) 92%, transparent);
  --dp-chat-bubble-user: rgb(15 23 42);
  --dp-chat-bubble-user-fg: rgb(255 255 255);
  --dp-chat-bubble-assistant: rgb(248 250 252);
  --dp-chat-bubble-assistant-fg: rgb(15 23 42);
  --dp-chat-bubble-error: rgb(239 68 68 / 0.12);
  --dp-chat-bubble-error-fg: rgb(127 29 29);
  --dp-chat-avatar-bg: rgb(15 23 42 / 0.08);

  --dp-showcase-gradient:
    radial-gradient(
      1000px 500px at 50% -250px,
      rgba(59, 130, 246, 0.12),
      transparent 60%
    ),
    radial-gradient(
      800px 400px at 80% 20%,
      rgba(168, 85, 247, 0.08),
      transparent 60%
    );
}

/* Defaults for dark mode (match current Hero/Auth look) */
:root:not([data-theme]),
:root[data-theme="dark"] {
  color-scheme: dark;

  /* ðŸ”¥ Neutral Dark Grey Theme */
  --dp-bg: rgb(10 10 10); /* almost black */
  --dp-fg: rgb(255 255 255); /* pure white */
  --dp-fg-soft: rgb(230 230 230); /* soft white */
  --dp-muted: rgb(180 180 180); /* medium grey */
  --dp-subtle: rgb(140 140 140); /* lighter grey */
  --dp-border: rgb(255 255 255 / 0.08);
  --dp-surface: rgb(20 20 20); /* dark grey surface */
  --dp-surface-muted: rgb(28 28 28); /* slightly lighter */
  --dp-nav-scrolled-bg: rgb(10 10 10 / 0.7);
  --dp-nav-panel-bg: rgb(18 18 18 / 0.95);
  --dp-glow-opacity: 0.5;
  --dp-placeholder: rgb(120 120 120);

  /* Buttons */
  --dp-btn-primary-bg: rgb(255 255 255);
  --dp-btn-primary-fg: rgb(0 0 0);
  --dp-btn-primary-bg-hover: rgb(230 230 230);

  /* Hero button */
  --dp-btn-hero-bg: rgb(255 255 255);
  --dp-btn-hero-fg: rgb(0 0 0);
  --dp-btn-hero-bg-hover: rgb(220 220 220);
  --dp-btn-hero-fg-hover: rgb(0 0 0);

  /* Sidebar */
  --dp-sidebar-bg: rgb(15 15 15 / 0.96);
  --dp-hover-bg: rgb(255 255 255 / 0.05);
  --dp-overlay-bg: rgb(0 0 0 / 0.6);

  /* Status colors (keep them vibrant for contrast) */
  --dp-status-online: rgb(34 197 94);
  --dp-toast-success: rgb(34 197 94);
  --dp-toast-error: rgb(239 68 68);
  --dp-toast-warning: rgb(245 158 11);
  --dp-toast-info: rgb(96 165 250);

  --dp-danger-bg: rgb(239 68 68 / 0.1);
  --dp-danger-bg-hover: rgb(239 68 68 / 0.15);
  --dp-danger-border: rgb(239 68 68 / 0.25);
  --dp-danger-fg: rgb(255 180 180);

  --dp-resize-handle-bg: rgb(40 40 40);

  /* Chat */
  --dp-chat-fade-bg: color-mix(in srgb, var(--dp-surface) 92%, transparent);
  --dp-chat-bubble-user: rgb(255 255 255);
  --dp-chat-bubble-user-fg: rgb(0 0 0);
  --dp-chat-bubble-assistant: rgb(35 35 35);
  --dp-chat-bubble-assistant-fg: rgb(255 255 255);
  --dp-chat-bubble-error: rgb(239 68 68 / 0.2);
  --dp-chat-bubble-error-fg: rgb(255 200 200);
  --dp-chat-avatar-bg: rgb(255 255 255 / 0.08);

  --dp-showcase-gradient:
    radial-gradient(
      1000px 500px at 50% -250px,
      rgba(212, 117, 28, 0.979),
      transparent 60%
    ),
    radial-gradient(
      800px 400px at 20% 40%,
      rgba(169, 85, 247, 0.151),
      transparent 60%
    );
}

/* Chat UI helpers */
.dp-chat-topfade {
  background: linear-gradient(
    to bottom,
    var(--dp-chat-fade-bg) 0%,
    transparent 100%
  );
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

/*
  Make chat content fade out (become transparent) near the top edge.
  This avoids an obvious overlay strip and feels like it merges with the background.
*/
.dp-chat-scroll {
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0px,
    rgba(0, 0, 0, 0.2) 10px,
    rgba(0, 0, 0, 1) 32px,
    rgba(0, 0, 0, 1) 100%
  );
  mask-image: linear-gradient(
    to bottom,
    transparent 0px,
    rgba(0, 0, 0, 0.2) 10px,
    rgba(0, 0, 0, 1) 32px,
    rgba(0, 0, 0, 1) 100%
  );
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
}

.dp-chat-avatar {
  height: 32px;
  width: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 9999px;
  background-color: var(--dp-chat-avatar-bg);
  border: 1px solid var(--dp-border);
}

.dp-chat-bubble-user {
  background-color: var(--dp-chat-bubble-user);
  color: var(--dp-chat-bubble-user-fg);
}

.dp-chat-bubble-assistant {
  background-color: var(--dp-chat-bubble-assistant);
  color: var(--dp-chat-bubble-assistant-fg);
  border: 1px solid var(--dp-border);
}

.dp-chat-bubble-error {
  background-color: var(--dp-chat-bubble-error);
  color: var(--dp-chat-bubble-error-fg);
  border: 1px solid var(--dp-danger-border);
}

/* Base page colors */
html,
body {
  background-color: var(--dp-bg);
  color: var(--dp-fg);
}

::selection {
  background-color: rgb(245 158 11 / 0.25); /* amber-500-ish, subtle */
}

/*
  Light-mode remapping for the existing Tailwind utility classes.
  This lets most components keep their current dark-theme classnames,
  while rendering correctly in light mode.
*/
:root[data-theme="light"] .bg-slate-950 {
  background-color: var(--dp-bg) !important;
}

:root[data-theme="light"] .bg-slate-950\/40 {
  background-color: var(--dp-nav-scrolled-bg) !important;
}

:root[data-theme="light"] .bg-slate-950\/60 {
  background-color: var(--dp-nav-panel-bg) !important;
}

:root[data-theme="light"] .bg-slate-950\/80 {
  background-color: rgb(255 255 255 / 0.92) !important;
}

:root[data-theme="light"] .bg-slate-950\/95 {
  background-color: rgb(255 255 255 / 0.96) !important;
}

:root[data-theme="light"] .text-white {
  color: var(--dp-fg) !important;
}

:root[data-theme="light"] .text-white\/90 {
  color: var(--dp-fg-soft) !important;
}

:root[data-theme="light"] .text-white\/70 {
  color: var(--dp-muted) !important;
}

:root[data-theme="light"] .text-white\/60 {
  color: var(--dp-subtle) !important;
}

:root[data-theme="light"] .border-white\/10,
:root[data-theme="light"] .border-white\/15,
:root[data-theme="light"] .border-white\/20 {
  border-color: var(--dp-border) !important;
}

:root[data-theme="light"] .bg-white\/5,
:root[data-theme="light"] .bg-white\/10,
:root[data-theme="light"] .bg-white\/15,
:root[data-theme="light"] .bg-white\/20 {
  background-color: var(--dp-surface-muted) !important;
}

:root[data-theme="light"] .placeholder-white\/40::placeholder {
  color: var(--dp-placeholder) !important;
}

/* Semantic button helpers (use these instead of hard-coded bg/text combos) */
.dp-btn-primary {
  background-color: var(--dp-btn-primary-bg);
  color: var(--dp-btn-primary-fg);
}

.dp-btn-primary:hover {
  background-color: var(--dp-btn-primary-bg-hover);
}

.dp-btn-secondary {
  background-color: var(--dp-surface-muted);
  border: 1px solid var(--dp-border);
  color: var(--dp-fg);
}

.dp-btn-secondary:hover {
  background-color: var(--dp-surface);
}

.dp-resize-handle-bg {
  background-color: var(--dp-resize-handle-bg);
}

/* Small icon buttons that should inherit text color (e.g. inside selected rows) */
.dp-btn-icon {
  background-color: transparent;
  border: 1px solid var(--dp-border);
  color: currentColor;
}

.dp-btn-icon:hover {
  background-color: var(--dp-hover-bg);
}

.dp-btn-hero {
  background-color: var(--dp-btn-hero-bg);
  color: var(--dp-btn-hero-fg);
}

.dp-btn-hero:hover {
  background-color: var(--dp-btn-hero-bg-hover);
  color: var(--dp-btn-hero-fg-hover);
}

/* Calendar chips (use semantic variables, no hard-coded colors) */
.dp-cal-chip {
  border-left-width: 4px;
  border-left-style: solid;
}

.dp-cal-chip-event {
  border-left-color: var(--dp-toast-info);
}

.dp-cal-chip-task {
  border-left-color: var(--dp-toast-warning);
}

.dp-cal-chip-todo {
  border-left-color: var(--dp-toast-success);
}

/* Explicit color overrides (for per-item coloring) */
.dp-cal-chip-info {
  border-left-color: var(--dp-toast-info);
}

.dp-cal-chip-success {
  border-left-color: var(--dp-toast-success);
}

.dp-cal-chip-warning {
  border-left-color: var(--dp-toast-warning);
}

.dp-cal-chip-danger {
  border-left-color: var(--dp-toast-error);
}

/* Theme-driven utility classes (avoid hard-coded color utilities in components) */
.dp-bg {
  background-color: var(--dp-bg);
}

.dp-surface {
  background-color: var(--dp-surface);
}

.dp-surface-muted {
  background-color: var(--dp-surface-muted);
}

.dp-nav-panel {
  background-color: var(--dp-nav-panel-bg);
}

.dp-sidebar-surface {
  background-color: var(--dp-sidebar-bg);
}

.dp-text {
  color: var(--dp-fg);
}

.dp-text-soft {
  color: var(--dp-fg-soft);
}

.dp-text-muted {
  color: var(--dp-muted);
}

.dp-text-subtle {
  color: var(--dp-subtle);
}

.dp-text-danger {
  color: var(--dp-toast-error);
}

.dp-border {
  border-color: var(--dp-border);
}

.dp-hover-bg:hover {
  background-color: var(--dp-hover-bg);
}

.dp-hover-text:hover {
  color: var(--dp-fg);
}

.dp-overlay {
  background-color: var(--dp-overlay-bg);
}

.dp-sidebar-item-active {
  background-color: var(--dp-btn-primary-bg);
  color: var(--dp-btn-primary-fg);
}

.dp-status-online {
  background-color: var(--dp-status-online);
}

.dp-border-bg {
  border-color: var(--dp-bg);
}

/* Toast accents */
.dp-toast-success {
  border-left: 3px solid var(--dp-toast-success);
}

.dp-toast-error {
  border-left: 3px solid var(--dp-toast-error);
}

.dp-toast-warning {
  border-left: 3px solid var(--dp-toast-warning);
}

.dp-toast-info {
  border-left: 3px solid var(--dp-toast-info);
}

.dp-danger {
  background-color: var(--dp-danger-bg);
  border-color: var(--dp-danger-border);
  color: var(--dp-danger-fg);
}

.dp-danger:hover {
  background-color: var(--dp-danger-bg-hover);
}

/* Glow backdrop intensity */
:root[data-theme="light"] .dp-glow {
  opacity: var(--dp-glow-opacity);
}

:root[data-theme="dark"] .dp-glow,
:root:not([data-theme]) .dp-glow {
  opacity: var(--dp-glow-opacity);
}
/* -------------------------------- */
/* HERO VISUAL FILTER CONTROL */
/* -------------------------------- */

/* Default (dark mode) â€“ black & white cinematic */
:root:not([data-theme="light"]) .dp-hero-visual img,
:root:not([data-theme="light"]) .dp-hero-visual video {
  filter: grayscale(1) contrast(1.05) brightness(0.85);
}

/* Light mode â€“ normal colorful */
:root[data-theme="light"] .dp-hero-visual img,
:root[data-theme="light"] .dp-hero-visual video {
  filter: none;
}
.dp-showcase-bg {
  position: relative;
  isolation: isolate; /* ensures gradient sits behind content cleanly */
}

.dp-showcase-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--dp-showcase-gradient);
  pointer-events: none;
  z-index: -1; /* stay behind content */
}
